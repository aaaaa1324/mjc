<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>ëª…ì§€ì „ë¬¸ëŒ€ - ì˜¤ëŠ˜ì˜ ë©”ë‰´ëŠ”</title>
  <style>
    /* ì „ì²´ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ ì„¤ì • */
    .board-container {
      display: flex;
      min-height: calc(100vh - 90px);
      margin-top: 90px;
      font-family: 'Poppins', sans-serif;
    }

    /* ì¢Œì¸¡ ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ */
    .sidebar {
      width: 220px;
      background-color: #e7f0ff;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }

    .sidebar button {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      padding: 12px 16px;
      background-color: #0066cc;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .sidebar button:hover {
      background-color: #004c99;
    }

    /* ê²Œì‹œíŒ ë³¸ë¬¸ ì˜ì—­ ìŠ¤íƒ€ì¼ */
    .board-content {
      flex-grow: 1;
      padding: 40px;
      background-color: #f9f9f9;
    }

    /* ê²Œì‹œíŒ ë‚´ìš© ì„¹ì…˜ ê¸°ë³¸ ìˆ¨ê¹€ ì²˜ë¦¬ */
    .board-section {
      display: none;
    }

    /* í™œì„±í™”ëœ ê²Œì‹œíŒ ì„¹ì…˜ */
    .board-section.active {
      display: block;
    }

    .board-section h2 {
      font-size: 26px;
      color: #333;
      margin-bottom: 20px;
      border-bottom: 2px solid #ddd;
      padding-bottom: 10px;
    }

    /* ê²Œì‹œê¸€ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .post {
      background-color: #ffffff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.3s;
      display: flex;
      flex-direction: column;
      height: auto;
      cursor: pointer;
    }

    .post:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .post-title {
      font-size: 20px;
      font-weight: bold;
      color: #0066cc;
      margin-bottom: 10px;
    }

    .post-meta {
      font-size: 14px;
      color: #888;
      margin-bottom: 15px;
    }

    .post-content {
      font-size: 15px;
      color: #555;
    }

    /* ëŒ“ê¸€ ìŠ¤íƒ€ì¼ */
    .comment {
      background-color: #f1f1f1;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    /* ëª¨ë‹¬ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fff;
      padding: 30px;
      border-radius: 10px;
      width: 500px;
      position: relative;
    }

    .modal-content .close {
      position: absolute;
      top: 15px;
      right: 20px;
      cursor: pointer;
      font-size: 24px;
    }
  </style>
</head>

<body>
  <main class="board-container">
    <!-- ì‚¬ì´ë“œë°” ë²„íŠ¼ë“¤ -->
    <nav class="sidebar">
      <button onclick="showBoard('free')">ğŸ“¢ ììœ ê²Œì‹œíŒ</button>
      <button onclick="showBoard('lunch')">ğŸ± ì ë©”ì¶” ê²Œì‹œíŒ</button>
      <button onclick="showBoard('restaurant')">ğŸœ ë‚˜ë§Œ ì•„ëŠ” ë§›ì§‘</button>
      <button onclick="showBoard('pub')">ğŸ¶ ë‚˜ë§Œ ì•„ëŠ” ìˆ ì§‘</button>
    </nav>

    <div class="board-content">
      <!-- ììœ ê²Œì‹œíŒ ì„¹ì…˜ -->
      <div id="free" class="board-section active">
        <h2>ììœ ê²Œì‹œíŒ</h2>

        <!-- ìƒ˜í”Œ ê²Œì‹œê¸€ 1 -->
        <div class="post" onclick="openDetailModal('ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ê¸‰ì‹ ë§›ìˆì—ˆì–´ìš” ğŸ˜‹', 'MJí•™ìƒ', '2025.04.14', 'ì˜¤ëŠ˜ êµ­ë°¥ì´ ì •ë§ ë§›ìˆì—ˆì–´ìš”! ì—¬ëŸ¬ë¶„ë„ ë“œì…¨ë‚˜ìš”?', ['ë§›ìˆì—ˆì–´ìš”!', 'ì €ë„ ë¨¹ì—ˆì–´ìš”!'], false)">
          <div class="post-title">ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ê¸‰ì‹ ë§›ìˆì—ˆì–´ìš” ğŸ˜‹</div>
          <div class="post-meta">ì‘ì„±ì: MJí•™ìƒ | 2025.04.14</div>
          <div class="post-content">ì˜¤ëŠ˜ êµ­ë°¥ì´ ì •ë§ ë§›ìˆì—ˆì–´ìš”! ì—¬ëŸ¬ë¶„ë„ ë“œì…¨ë‚˜ìš”?</div>
        </div>

        <!-- ìƒ˜í”Œ ê²Œì‹œê¸€ 2 -->
        <div class="post" onclick="openDetailModal('ì‹œí—˜ê¸°ê°„ì…ë‹ˆë‹¤ã… ã… ', 'ì»´ê³µê³¼', '2025.04.13', 'ë‹¤ë“¤ ê³µë¶€ ì—´ì‹¬íˆ í•˜ì„¸ìš”.. ì €ëŠ” ë²Œì¨ ì²´ë ¥ì´ ë°©ì „...', ['í™”ì´íŒ…!', 'í˜ë‚´ì„¸ìš”!'], false)">
          <div class="post-title">ì‹œí—˜ê¸°ê°„ì…ë‹ˆë‹¤ã… ã… </div>
          <div class="post-meta">ì‘ì„±ì: ì»´ê³µê³¼ | 2025.04.13</div>
          <div class="post-content">ë‹¤ë“¤ ê³µë¶€ ì—´ì‹¬íˆ í•˜ì„¸ìš”.. ì €ëŠ” ë²Œì¨ ì²´ë ¥ì´ ë°©ì „...</div>
        </div>

        <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
        <div style="text-align: right; margin-bottom: 20px;">
          <button onclick="openWriteModal()" style="background-color: #0066cc; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold;">
            + ê¸€ì“°ê¸°
          </button>
        </div>
      </div>

      <!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
      <div id="writeModal" class="modal" style="display: none;">
        <div class="modal-content">
          <span class="close" onclick="closeWriteModal()">&times;</span>
          <h2>ê¸€ì“°ê¸°</h2>
          <input type="text" id="newTitle" placeholder="ì œëª©" style="width: 100%; padding: 10px; margin-bottom: 10px;">
          <textarea id="newContent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 100%; height: 150px; padding: 10px;"></textarea>
          <button onclick="submitPost()" style="margin-top: 10px; background-color: #0066cc; color: white; padding: 10px 20px; border: none; border-radius: 6px;">ì‘ì„± ì™„ë£Œ</button>
        </div>
      </div>

      <!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
      <div id="detailModal" class="modal" style="display: none;">
        <div class="modal-content">
          <span class="close" onclick="closeDetailModal()">&times;</span>
          <h2 id="detailTitle"></h2>
          <div id="detailAuthor"></div>
          <div id="detailDate"></div>
          <p id="detailContent"></p>
          <hr>
          <h4>ëŒ“ê¸€</h4>
          <div id="commentList"></div>
          <input type="text" id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 80%; padding: 6px;">
          <button onclick="addComment()" style="padding: 6px 10px; background-color: #0066cc; color: white;">ì‘ì„±</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    let userPosts = []; // ì‚¬ìš©ìê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ ì €ì¥ìš©
    let currentPostIndex = null; // ëŒ“ê¸€ ì‘ì„± ì‹œ í•´ë‹¹ ê¸€ ìœ„ì¹˜ ê¸°ì–µ

    // ê²Œì‹œíŒ ë©”ë‰´ í´ë¦­ ì‹œ í•´ë‹¹ ê²Œì‹œíŒ í‘œì‹œ
    function showBoard(boardId) {
      document.querySelectorAll('.board-section').forEach(section => section.classList.remove('active'));
      document.getElementById(boardId).classList.add('active');
    }

    // ê¸€ì“°ê¸° ëª¨ë‹¬ ì—´ê¸°
    function openWriteModal() {
      document.getElementById('writeModal').style.display = 'flex';
    }

    // ê¸€ì“°ê¸° ëª¨ë‹¬ ë‹«ê¸°
    function closeWriteModal() {
      document.getElementById('writeModal').style.display = 'none';
    }

    // ê¸€ì“°ê¸° ì™„ë£Œ í›„ ê²Œì‹œíŒì— ì¶”ê°€
    function submitPost() {
      const title = document.getElementById('newTitle').value.trim();
      const content = document.getElementById('newContent').value.trim();

      if (!title || !content) {
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      // ë‚ ì§œ ìƒì„±
      const today = new Date();
      const dateStr = today.getFullYear() + "." + (today.getMonth() + 1).toString().padStart(2, '0') + "." + today.getDate().toString().padStart(2, '0');

      // ê²Œì‹œê¸€ ë°ì´í„° êµ¬ì„±
      const postData = {
        title: title,
        author: "ìµëª…",
        date: dateStr,
        content: content,
        comments: []
      };

      userPosts.push(postData); // ë°°ì—´ì— ì €ì¥

      // ê²Œì‹œíŒì— ìƒˆ ìš”ì†Œ ì¶”ê°€
      const postDiv = document.createElement("div");
      postDiv.className = "post";
      postDiv.innerHTML = `
        <div class="post-title">${title}</div>
        <div class="post-meta">ì‘ì„±ì: ìµëª… | ${dateStr}</div>
        <div class="post-content">${content}</div>
      `;
      postDiv.onclick = () => openDetailModal(title, "ìµëª…", dateStr, content, postData.comments, true);
      document.getElementById("free").insertBefore(postDiv, document.getElementById("free").lastElementChild);

      closeWriteModal();
      document.getElementById('newTitle').value = "";
      document.getElementById('newContent').value = "";
    }

    // ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ì—´ê¸°
    function openDetailModal(title, author, date, content, comments, isUserPost) {
      document.getElementById('detailTitle').innerText = title;
      document.getElementById('detailAuthor').innerText = `ì‘ì„±ì: ${author}`;
      document.getElementById('detailDate').innerText = `ì‘ì„±ì¼: ${date}`;
      document.getElementById('detailContent').innerText = content;

      // ëŒ“ê¸€ ëª©ë¡ ìƒì„±
      const commentList = document.getElementById('commentList');
      commentList.innerHTML = '';
      comments.forEach(comment => {
        const div = document.createElement('div');
        div.className = 'comment';
        div.innerText = comment;
        commentList.appendChild(div);
      });

      // í˜„ì¬ ê¸€ ì¸ë±ìŠ¤ ì €ì¥ (ëŒ“ê¸€ ê¸°ëŠ¥ ìœ„í•´)
      if (isUserPost) {
        currentPostIndex = userPosts.findIndex(post => post.title === title && post.date === date);
      } else {
        currentPostIndex = null;
      }

      document.getElementById('detailModal').style.display = 'flex';
    }

    // ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ë‹«ê¸°
    function closeDetailModal() {
      document.getElementById('detailModal').style.display = 'none';
    }

    // ëŒ“ê¸€ ì¶”ê°€ ê¸°ëŠ¥
    function addComment() {
      const input = document.getElementById('commentInput');
      const text = input.value.trim();
      if (!text) return;

      const commentList = document.getElementById('commentList');
      const div = document.createElement('div');
      div.className = 'comment';
      div.innerText = text;
      commentList.appendChild(div);

      // ëŒ“ê¸€ì„ í•´ë‹¹ ê¸€ì— ì €ì¥
      if (currentPostIndex !== null) {
        userPosts[currentPostIndex].comments.push(text);
      } else {
        alert("ì´ ê²Œì‹œê¸€ì€ ê¸°ë³¸ ê¸€ì´ë¼ ëŒ“ê¸€ ì €ì¥ì€ ì•ˆ ë¼ìš”");
      }

      input.value = '';
    }
  </script>
</body>

</html>
